<div class="row justify-content-between my-3">
  <div class="col-md text-start">
    <h6>{{strFilteredMessage}}</h6>
  </div>
  <div class="col-md text-center">
    <app-search-unrouted [strFilter]="strFilter"
      [strTitlePlural]="'Filtro de ' + oMetadataService.getPluralName4Entity(strEntity).toLowerCase()"
      (eeFilter)="onSetFilter($event)">
    </app-search-unrouted>
  </div>
  <div class="col-md text-end">
    <h4 class="text-muted">{{nTotalElements}} {{oMetadataService.getPluralName4Entity(strEntity)}}</h4>
  </div>
</div>

<div class="row justify-content-between">
  <div class="col-md text-start">
    <app-pagination-unrouted [nPage]="nPage" [nTotalPages]="nTotalPages" (eePage)="onSetPage($event)">
    </app-pagination-unrouted>
  </div>
  <div class="col-md text-center">
    <ng-content select="header"></ng-content>
  </div>
  <div class="col-md text-end">
    <app-rpp-unrouted [nPageSize]="nPageSize" (eeRpp)="onSetRpp($event)"></app-rpp-unrouted>
  </div>
</div>

<div class="row justify-content-center">

  <div class="card m-1" *ngFor="let producto of aProductos">
    <img class="card-img-top" [src]="'http://localhost:8082/file/' + producto.imagen" height="180px" width="180px" />
    <div class="card-body d-flex flex-column">

      <div>
        <div class="card-title d-flex justify-content-between">
          <h4 class="flex-grow-1"> <a class="nombreproducto" [href]="'producto/cview/'+producto.id"> {{producto.nombre}}
            </a> </h4>
          <div> <i *ngIf="producto.cantidad" class="fas fa-shopping-cart" pBadge style="font-size: 2rem"
              value="{{producto.cantidad}}"></i></div>
        </div>
        <div class="d-flex justify-content-center">
          <p class="card-text flex-grow-1" style="font-size: 0.75rem">{{producto.tipoproducto.nombre}}</p>
        </div>
      </div>

      <div class="mt-auto">
        <div class="d-flex justify-content-center m-3">
          <span class="badge rounded-pill bg-warning" *ngIf="producto.existencias>20">{{producto.existencias|number:
            '1.0-0':'es-ES'}}
            disponibles</span>
          <span class="badge rounded-pill bg-danger" *ngIf="producto.existencias<=20">Sólo {{producto.existencias}}
            disponibles</span>
        </div>
        <div class="d-flex justify-content-center">
          <h1><span class="badge bg-secondary">{{producto.precio.toFixed(2)|number: '1.2-2':'es-ES'}}€</span></h1>
        </div>
        <div class="d-flex justify-content-between">
          <button type="button" class="btn btn-primary flex-grow-1 m-1"
            *ngIf="id_tipousuario_session==2&&producto.existencias>0&&producto.cantidad<producto.existencias"
            (click)="addCarrito(producto.id)"><i class="fas fa-cart-plus" style="font-size: 2rem"></i></button>
          <button type="button" class="btn btn-danger m-1" *ngIf="id_tipousuario_session==2&&producto.cantidad>0"
            (click)="removeCarrito(producto.id)"><i class="fas fa-cart-admin-routedrow-down"
              style="font-size: 2rem"></i></button>
        </div>
      </div>

    </div>

  </div>

</div>